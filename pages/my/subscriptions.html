<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../../css/common/reset.css" />
  <link rel="stylesheet" href="../../css/common/style.css" />
  <link rel="stylesheet" href="../../css/common/tab-bar.css" />
  <link rel="stylesheet" href="../../css/common/header-base.css" />
  <link rel="stylesheet" href="../../css/my/subscriptions.css" />
  <title>MeetMeet : 구독 리스트</title>
</head>
<body>
  <div id="wrapper">
    <header id="header">
      <div class="back">
        <button onclick="goBack()" class="back-btn"><img src="../../img/icon/icon-arrow-left-pink.svg" alt="뒤로가기" /></button>
      </div>
      <div class="flex gap-4 item-center">
        <h1>닉네임(본인)</h1>
      </div>
      <div style="width: 1.25rem;"></div>
    </header>
    <!--//header-->

    <div id="tab-menu">
      <div class="tab-box active">
        <span>구독중</span>
      </div>
      <div class="tab-box">
        <span>구독자</span>
      </div>

      <div id="tab-underline"></div>
    </div>
    <!--//tab-menu-->

    <div id="my-subscriptions">
      <div class="sub-list">
        <ul>
          <li>
            <div class="sub-profile">
              <div class="profile-img">
                <img src="../../img/my/subscriptions/profile1.png" alt="프로필 이미지" />
              </div>
              <div class="profile-info">
                <div class="nick-name">
                  <span>Gabriel</span>
                  <img src="../../img/icon/verified.svg" alt="인증된 사용자" />
                </div>
                <span class="name">@suyeon_soe</span>
              </div>
            </div>
            <button class="cancel-btn">구독 취소</button>
          </li>
          <li>
            <div class="sub-profile">
              <div class="profile-img">
                <img src="../../img/my/subscriptions/profile2.png" alt="프로필 이미지" />
              </div>
              <div class="profile-info">
                <div class="nick-name">
                  <span>Gabriel</span>
                  <img src="" alt="" />
                </div>
                <span class="name">@suyeon_soe</span>
              </div>
            </div>
            <button class="cancel-btn">구독 취소</button>
          </li>
        </ul>
      </div>
    </div>

    <div id="subscribers">
      <div class="sub-list">
        <ul>
          <li>
            <div class="sub-profile">
              <div class="profile-img">
                <img src="../../img/my/subscriptions/profile2.png" alt="프로필 이미지" />
              </div>
              <div class="profile-info">
                <div class="nick-name">
                  <span>Gabriel</span>
                  <img src="" alt="" />
                </div>
                <span class="name">@suyeon_soe</span>
              </div>
            </div>
          </li>
          <li>
            <div class="sub-profile">
              <div class="profile-img">
                <img src="../../img/my/subscriptions/profile1.png" alt="프로필 이미지" />
              </div>
              <div class="profile-info">
                <div class="nick-name">
                  <span>Gabriel</span>
                  <img src="../../img/icon/verified.svg" alt="인증된 사용자" />
                </div>
                <span class="name">@suyeon_soe</span>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>


  <script>
    const tabs = document.querySelectorAll("#tab-menu .tab-box");
    const underline = document.querySelector("#tab-underline");
    const mySubs = document.querySelector("#my-subscriptions");
    const subscribers = document.querySelector("#subscribers");

    // 기본: 구독중 활성
    mySubs.style.display = "block";
    subscribers.style.display = "none";

    // 언더라인 위치/너비를 탭에 맞추는 함수
    function moveUnderline(tab) {
      const menuRect = document
              .querySelector("#tab-menu")
              .getBoundingClientRect();
      const tabRect = tab.getBoundingClientRect();

      const left = tabRect.left - menuRect.left; // 탭메뉴 안에서의 x좌표
      const width = tabRect.width;

      underline.style.left = left + "px";
      underline.style.width = width + "px";
    }

    // 초기 언더라인 위치 (기본 active = 첫 번째 탭)
    window.addEventListener("load", () => {
      const activeTab = document.querySelector("#tab-menu .tab-box.active") || tabs[0];
      moveUnderline(activeTab);
    });

    tabs.forEach((tab, index) => {
      tab.addEventListener("click", () => {
        // active 토글
        tabs.forEach(t => t.classList.remove("active"));
        tab.classList.add("active");

        // 언더라인 이동
        moveUnderline(tab);

        // 콘텐츠 토글
        if (index === 0) {
          mySubs.style.display = "block";
          subscribers.style.display = "none";
        } else {
          mySubs.style.display = "none";
          subscribers.style.display = "block";
        }
      });
    });

    function goBack() {
      if (document.referrer && document.referrer !== "") {
        history.back();
      } else {
        window.location.href = "../my.html";
      }
    }
  </script>

</body>
</html>